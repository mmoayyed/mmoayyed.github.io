<hr>
<h2>
<a id="layout-----posttitle------apereo-cas---payara-micro-deploymentssummary----learn-how-to-deploy-apereo-cas-via-payara-microtags-------casbackground-imageshomeslide-1jpg" class="anchor" href="#layout-----posttitle------apereo-cas---payara-micro-deploymentssummary----learn-how-to-deploy-apereo-cas-via-payara-microtags-------casbackground-imageshomeslide-1jpg" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>layout:     post<br>
title:      Apereo CAS - Payara Micro Deployments<br>
summary:    Learn how to deploy Apereo CAS via Payara Micro.<br>
tags:       [CAS]<br>
background: '/images/home/slide-1.jpg'</h2>
<h1>
<a id="overview" class="anchor" href="#overview" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Overview</h1>
<p><a href="https://www.payara.fish/software/payara-server/payara-micro/">Payara Micro</a> is the open source, lightweight middleware platform of choice for containerized Java EE (Jakarta EE) microservices deployments.  Less than 70MB in size, Payara Micro requires no installation or configuration and no need for code rewrites  â€“ so you can build and deploy a fully working app within minutes.</p>
<p>This is a short and sweet tutorial on how to get Apereo CAS deployed via Payara Micro.</p>
<p>Our starting position is based on:</p>
<ul>
<li>CAS <code>6.2.x</code>
</li>
<li>Java <code>11</code>
</li>
<li>Payara Micro <code>5.194</code>
</li>
<li><a href="https://github.com/apereo/cas-overlay-template">CAS WAR Overlay</a></li>
</ul>
<h1>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h1>
<p>Clone the CAS WAR overlay and then download the Payara Micro application server. Next, in <code>gradle.properties</code> file, blank out the application server property:</p>
<pre lang="properties"><code>appServer=
</code></pre>
<p>Next, make sure <code>src/main/webapp/WEB-INF/web.xml</code> exists in the overlay with the following content:</p>
<pre lang="xml"><code>&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;web-app version="3.1" 
     metadata-complete="true"
     xmlns="http://xmlns.jcp.org/xml/ns/javaee" 
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
     xsi:schemaLocation="http://xmlns.jcp.org/xml/ns/javaee http://xmlns.jcp.org/xml/ns/javaee/web-app_3_1.xsd"&gt;
&lt;/web-app&gt;
</code></pre>
<p>The key in the above snippet is <code>metadata-complete="true"</code>; it indicates that the JAR files in <code>/WEB-INF/lib</code> don't need to be scanned for Servlet 3.0 specific annotations, but the webapp's own classes will still be scanned. This is to specifically prevent <a href="https://java.net/jira/browse/GLASSFISH-21265">this bug</a>.</p>
<p>Finally, build the overlay using <code>./gradlew clean build</code> and then deploy to Payara Micro using:</p>
<pre lang="bash"><code>java -jar /path/to/payara-micro.jar --deploy /path/to/cas-overlay/build/libs/cas.war
</code></pre>
<p>Once the deployment is complete, CAS will be available at <code>http://localhost:8080/cas</code>.</p>
<h1>
<a id="so" class="anchor" href="#so" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>So...</h1>
<p>I hope this review was of some help to you and I am sure that both this post as well as the functionality it attempts to explain can be improved in any number of ways. Please know that all other use cases, scenarios, features, and theories certainly <a href="https://apereo.github.io/2017/02/18/onthe-theoryof-possibility/">are possible</a> as well. Feel free to <a href="https://apereo.github.io/cas/developer/Contributor-Guidelines.html">engage and contribute</a> as best as you can.</p>
<p>Happy Coding,</p>
<p><a href="https://fawnoos.com">Misagh Moayyed</a></p>