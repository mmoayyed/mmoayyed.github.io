<hr>
<h2>
<a id="layout-----posttitle------apereo-cas---managing-configuration-profilessummary----as-your-cas-deployment-moves-through-the-deployment-pipeline-from-dev-to-test-and-into-production-you-can-manage-the-configuration-between-those-environments-separately-using-application-profiles-and-be-certain-that-each-tier-has-everything-it-needs-to-run-when-the-server-migratestags-------casbackground-imageshomeslide-1jpg" class="anchor" href="#layout-----posttitle------apereo-cas---managing-configuration-profilessummary----as-your-cas-deployment-moves-through-the-deployment-pipeline-from-dev-to-test-and-into-production-you-can-manage-the-configuration-between-those-environments-separately-using-application-profiles-and-be-certain-that-each-tier-has-everything-it-needs-to-run-when-the-server-migratestags-------casbackground-imageshomeslide-1jpg" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>layout:     post<br>
title:      Apereo CAS - Managing Configuration Profiles<br>
summary:    As your CAS deployment moves through the deployment pipeline from dev to test and into production, you can manage the configuration between those environments separately using application profiles and be certain that each tier has everything it needs to run when the server migrates.<br>
tags:       [CAS]<br>
background: '/images/home/slide-1.jpg'</h2>
<h1>
<a id="overview" class="anchor" href="#overview" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Overview</h1>
<p>CAS allows you to externalize your configuration settings so you can work with the same CAS instance in different environments. You can use properties files, YAML files, environment variables and command-line arguments (just to name a few!) to externalize and provide configuration. These strategies present a very flexible and powerful way to manage CAS configuration for production deployments in a variety of use cases. This is a short blog post on how to manage CAS configuration across tiers and avoid duplication of settings as much as possible.</p>
<p>Our starting position is based on:</p>
<ul>
<li>CAS <code>6.2.x</code>
</li>
<li>Java <code>11</code>
</li>
<li><a href="https://github.com/apereo/cas-overlay-template">CAS WAR Overlay</a></li>
</ul>
<h1>
<a id="configuration" class="anchor" href="#configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Configuration</h1>
<p>In most cases, when you run CAS in <a href="https://apereo.github.io/cas/development/configuration/Configuration-Server-Management.html#standalone">standalone mode</a> specially, the default configuration directory on the filesystem (i.e. <code>/etc/cas/config</code>) may include <code>(cas|application).(yaml|yml|properties)</code> files that can be used to control behavior. You could design your configuration management scheme such that all <em>common</em> properties across all deployment environments and tiers are managed inside the likes of <code>cas.properties</code> file, while tier-specific settings are separated out into their own individual configuration file, such as <code>development.properties</code> and <code>production.properties</code> file.</p>
<p>For example, let's suppose that there are two different deployment environments for development and production where each should contain a different value for the CAS setting <code>cas.authn.accept.users</code>. To achieve this, this setting needs to be extracted from the common <code>cas.properties</code> file and be put inside <code>development.properties</code> and <code>production.properties</code> files with relevant values:</p>
<p>Your <code>development.properties</code> file would be:</p>
<pre lang="properties"><code>cas.authn.accept.users=&lt;value-for-development&gt;
</code></pre>
<p>...and your <code>production.properties</code> file would be:</p>
<pre lang="properties"><code>cas.authn.accept.users=&lt;value-for-production&gt;
</code></pre>
<p>Finally, you need to make sure the correct configuration profile is activated when CAS is running. One way to achieve this would be to pass along the <code>spring.profiles.include</code> parameter as a system property when CAS is run, with a value of the configuration profile appropriate for the tier.</p>
<p>For example, to run with a development profile:</p>
<pre lang="bash"><code>java -jar -Dspring.profiles.include=development build/libs/cas.war
</code></pre>
<p>...and to run with a production profile:</p>
<pre lang="bash"><code>java -jar -Dspring.profiles.include=production build/libs/cas.war
</code></pre>
<!-- raw HTML omitted -->
<p>Study <a href="https://apereo.github.io/cas/development/configuration/Configuration-Management.html">this reference</a> for more details.</p>
<h1>
<a id="so" class="anchor" href="#so" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>So...</h1>
<p>I hope this review was of some help to you and I am sure that both this post as well as the functionality it attempts to explain can be improved in any number of ways. Please know that all other use cases, scenarios, features, and theories certainly <a href="https://apereo.github.io/2017/02/18/onthe-theoryof-possibility/">are possible</a> as well. Feel free to <a href="https://apereo.github.io/cas/developer/Contributor-Guidelines.html">engage and contribute</a> as best as you can.</p>
<p>Happy Coding,</p>
<p><a href="https://fawnoos.com">Misagh Moayyed</a></p>